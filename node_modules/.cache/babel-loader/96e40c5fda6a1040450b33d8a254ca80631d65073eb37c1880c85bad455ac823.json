{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{Home,Star,Volume2,VolumeX,RotateCcw}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PatternMagicGame=_ref=>{let{theme,currentLevel,playerStats,setPlayerStats,playSound,getAIResponse,setGameState,unlockAchievement}=_ref;const[pattern,setPattern]=useState([]);const[userPattern,setUserPattern]=useState([]);const[showingPattern,setShowingPattern]=useState(true);const[currentStep,setCurrentStep]=useState(0);const[score,setScore]=useState(0);const[round,setRound]=useState(1);const[feedback,setFeedback]=useState('');const[isCorrect,setIsCorrect]=useState(null);const GAME_TYPES={patterns:{levels:{1:{length:3,complexity:'simple',patterns:['ABAB','AAB']},2:{length:4,complexity:'medium',patterns:['ABCD','ABAC']},3:{length:5,complexity:'complex',patterns:['ABCDE','AABBC']}}}};const generatePattern=()=>{const level=GAME_TYPES.patterns.levels[currentLevel];const patternTypes=level.patterns;const selectedType=patternTypes[Math.floor(Math.random()*patternTypes.length)];const newPattern=[];const symbols=theme.emojis.slice(0,4);for(let i=0;i<level.length;i++){const patternChar=selectedType[i%selectedType.length];newPattern.push(symbols[patternChar.charCodeAt(0)-'A'.charCodeAt(0)]);}setPattern(newPattern);setUserPattern([]);setCurrentStep(0);setShowingPattern(true);setFeedback('');setIsCorrect(null);// Show pattern for a few seconds\nsetTimeout(()=>setShowingPattern(false),3000);};const handleSymbolClick=symbol=>{if(showingPattern)return;const newUserPattern=[...userPattern,symbol];setUserPattern(newUserPattern);// Check if correct\nif(newUserPattern[currentStep]===pattern[currentStep]){if(newUserPattern.length===pattern.length){// Pattern complete!\nconst points=20*currentLevel;setScore(prev=>prev+points);setPlayerStats(prev=>({...prev,sparkCoins:prev.sparkCoins+points,streak:prev.streak+1,totalScore:prev.totalScore+points}));setFeedback(getAIResponse('correct'));setIsCorrect(true);playSound('correct');// Check for achievements\nif(playerStats.streak===0)unlockAchievement('first_correct');if(playerStats.streak+1===5)unlockAchievement('streak_5');setTimeout(()=>{if(round<5){setRound(prev=>prev+1);generatePattern();}else{setGameState('completed');if(score>=90)unlockAchievement('perfect_game');}},1500);}else{setCurrentStep(prev=>prev+1);playSound('correct');}}else{// Wrong symbol\nsetFeedback(getAIResponse('incorrect'));setIsCorrect(false);playSound('incorrect');setPlayerStats(prev=>({...prev,streak:0}));setTimeout(()=>{generatePattern();// Restart pattern\n},1000);}};useEffect(()=>{generatePattern();},[]);return/*#__PURE__*/_jsx(\"div\",{className:`min-h-screen bg-gradient-to-br ${theme.colors.secondary} p-4`,children:/*#__PURE__*/_jsxs(motion.div,{className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(motion.div,{className:\"flex justify-between items-center mb-8\",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGameState('menu'),className:\"p-3 bg-white/20 rounded-full hover:bg-white/30\",children:/*#__PURE__*/_jsx(Home,{className:\"w-6 h-6\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Pattern Magic\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-full\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-5 h-5 text-yellow-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:playerStats.sparkCoins})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[\"Round \",round,\"/5\"]})]})]}),/*#__PURE__*/_jsxs(motion.div,{className:\"text-center mb-8\",initial:{scale:0.8,opacity:0},animate:{scale:1,opacity:1},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 kid-interface\",children:showingPattern?'Watch the pattern!':'Complete the pattern!'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:theme.aiCompanion.emoji}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg\",children:[theme.aiCompanion.name,\" believes in you!\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg text-gray-600\",children:[\"Round \",round,\"/5\"]})]}),/*#__PURE__*/_jsx(motion.div,{className:\"flex justify-center gap-4 mb-8 p-6 bg-white/30 rounded-2xl\",initial:{scale:0.9,opacity:0},animate:{scale:1,opacity:1},children:pattern.map((symbol,index)=>/*#__PURE__*/_jsx(motion.div,{className:`\n                w-16 h-16 rounded-xl flex items-center justify-center text-3xl\n                ${showingPattern?'bg-white/50':index<userPattern.length?userPattern[index]===symbol?'bg-green-300':'bg-red-300':index===currentStep?'bg-yellow-300 ring-4 ring-yellow-400':'bg-gray-200'}\n              `,initial:{scale:0},animate:{scale:1},transition:{delay:index*0.1},children:showingPattern||index<userPattern.length?symbol:'?'},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-4 max-w-md mx-auto mb-8\",children:theme.emojis.slice(0,4).map((symbol,index)=>/*#__PURE__*/_jsx(motion.button,{onClick:()=>handleSymbolClick(symbol),disabled:showingPattern,className:\"w-16 h-16 bg-white/70 rounded-xl flex items-center justify-center text-3xl hover:bg-white/90 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed transition-all\",whileHover:!showingPattern?{scale:1.05}:{},whileTap:!showingPattern?{scale:0.95}:{},children:symbol},symbol))}),/*#__PURE__*/_jsx(AnimatePresence,{children:feedback&&/*#__PURE__*/_jsx(motion.div,{className:\"text-center\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:/*#__PURE__*/_jsxs(\"div\",{className:`inline-flex items-center gap-2 px-6 py-3 rounded-full text-lg font-bold ${isCorrect?'bg-green-500 text-white':'bg-orange-500 text-white'}`,children:[isCorrect?'ðŸŽ‰':'ðŸ¤”',\" \",feedback]})})})]})});};export default PatternMagicGame;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}