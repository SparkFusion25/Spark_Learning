{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{Home,Star,RotateCcw}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MemoryQuestGame=_ref=>{let{theme,currentLevel,playerStats,setPlayerStats,playSound,getAIResponse,setGameState,unlockAchievement}=_ref;const[cards,setCards]=useState([]);const[flippedCards,setFlippedCards]=useState([]);const[matchedPairs,setMatchedPairs]=useState([]);const[moves,setMoves]=useState(0);const[score,setScore]=useState(0);const[gameStarted,setGameStarted]=useState(false);const[feedback,setFeedback]=useState('');const[isCorrect,setIsCorrect]=useState(null);const GAME_TYPES={matching:{levels:{1:{pairs:4,flipTime:3000,showTime:2000},2:{pairs:6,flipTime:2500,showTime:1500},3:{pairs:8,flipTime:2000,showTime:1000}}}};const initializeGame=()=>{const level=GAME_TYPES.matching.levels[currentLevel];const symbols=theme.emojis.slice(0,level.pairs);const gameCards=[...symbols,...symbols].map((symbol,index)=>({id:index,symbol,isFlipped:true,// Start with all cards visible\nisMatched:false})).sort(()=>Math.random()-0.5);setCards(gameCards);setFlippedCards([]);setMatchedPairs([]);setMoves(0);setGameStarted(false);setFeedback('');setIsCorrect(null);// Show all cards briefly at start\nsetTimeout(()=>{setCards(prev=>prev.map(card=>({...card,isFlipped:false})));setGameStarted(true);},level.showTime);};const handleCardClick=cardId=>{if(!gameStarted||flippedCards.length>=2)return;const card=cards.find(c=>c.id===cardId);if(card.isFlipped||card.isMatched)return;const newFlippedCards=[...flippedCards,cardId];setFlippedCards(newFlippedCards);setCards(prev=>prev.map(c=>c.id===cardId?{...c,isFlipped:true}:c));if(newFlippedCards.length===2){setMoves(prev=>prev+1);const[firstCardId,secondCardId]=newFlippedCards;const firstCard=cards.find(c=>c.id===firstCardId);const secondCard=cards.find(c=>c.id===secondCardId);if(firstCard.symbol===secondCard.symbol){// Match found!\nsetTimeout(()=>{setCards(prev=>prev.map(c=>newFlippedCards.includes(c.id)?{...c,isMatched:true}:c));setMatchedPairs(prev=>[...prev,firstCard.symbol]);setFlippedCards([]);const points=50*currentLevel;setScore(prev=>prev+points);setPlayerStats(prev=>({...prev,sparkCoins:prev.sparkCoins+points,streak:prev.streak+1,totalScore:prev.totalScore+points}));setFeedback(getAIResponse('correct'));setIsCorrect(true);playSound('correct');// Check for achievements\nif(playerStats.streak===0)unlockAchievement('first_correct');if(playerStats.streak+1===5)unlockAchievement('streak_5');},500);}else{// No match\nsetTimeout(()=>{setCards(prev=>prev.map(c=>newFlippedCards.includes(c.id)?{...c,isFlipped:false}:c));setFlippedCards([]);setFeedback(getAIResponse('incorrect'));setIsCorrect(false);playSound('incorrect');},1000);}}};useEffect(()=>{initializeGame();},[]);useEffect(()=>{const level=GAME_TYPES.matching.levels[currentLevel];if(matchedPairs.length===level.pairs){setTimeout(()=>{setGameState('completed');if(moves<=level.pairs+2)unlockAchievement('perfect_game');// Efficient completion\n},1000);}},[matchedPairs]);const level=GAME_TYPES.matching.levels[currentLevel];const progress=matchedPairs.length/level.pairs*100;return/*#__PURE__*/_jsx(\"div\",{className:`min-h-screen bg-gradient-to-br ${theme.colors.secondary} p-4`,children:/*#__PURE__*/_jsxs(motion.div,{className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(motion.div,{className:\"flex justify-between items-center mb-8\",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGameState('menu'),className:\"p-3 bg-white/20 rounded-full hover:bg-white/30\",children:/*#__PURE__*/_jsx(Home,{className:\"w-6 h-6\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Memory Quest\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg\",children:[\"Moves: \",moves]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-full\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-5 h-5 text-yellow-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:playerStats.sparkCoins})]})]})]}),/*#__PURE__*/_jsxs(motion.div,{className:\"text-center mb-8\",initial:{scale:0.8,opacity:0},animate:{scale:1,opacity:1},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 kid-interface\",children:!gameStarted?'Memorize the cards!':'Find the matching pairs!'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:theme.aiCompanion.emoji}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg\",children:[theme.aiCompanion.name,\" knows you can do it!\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/30 rounded-full h-4 overflow-hidden\",children:/*#__PURE__*/_jsx(motion.div,{className:\"h-full bg-gradient-to-r from-green-400 to-blue-500\",initial:{width:0},animate:{width:`${progress}%`},transition:{duration:0.5}})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm mt-2\",children:[matchedPairs.length,\" / \",level.pairs,\" pairs found\"]})]})]}),/*#__PURE__*/_jsx(motion.div,{className:`grid gap-4 max-w-2xl mx-auto mb-8 ${level.pairs<=4?'grid-cols-4':level.pairs<=6?'grid-cols-4':'grid-cols-4'}`,initial:{scale:0.8,opacity:0},animate:{scale:1,opacity:1},children:cards.map(card=>/*#__PURE__*/_jsx(motion.div,{onClick:()=>handleCardClick(card.id),className:`\n                aspect-square rounded-xl cursor-pointer flex items-center justify-center text-4xl\n                ${card.isMatched?'bg-green-300 scale-105':card.isFlipped?'bg-white':'bg-white/30 hover:bg-white/50'}\n                transition-all duration-300\n              `,whileHover:!card.isMatched&&gameStarted?{scale:1.05}:{},whileTap:!card.isMatched&&gameStarted?{scale:0.95}:{},initial:{rotateY:180},animate:{rotateY:0},transition:{delay:card.id*0.05},children:card.isFlipped||card.isMatched?card.symbol:'‚ùì'},card.id))}),/*#__PURE__*/_jsxs(motion.div,{className:\"flex justify-center gap-8 mb-8\",initial:{y:50,opacity:0},animate:{y:0,opacity:1},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/20 rounded-2xl p-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-blue-600\",children:moves}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:\"Moves\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/20 rounded-2xl p-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-600\",children:matchedPairs.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:\"Pairs Found\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/20 rounded-2xl p-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-yellow-600\",children:score}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:\"Score\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center gap-4 mb-8\",children:/*#__PURE__*/_jsxs(motion.button,{onClick:initializeGame,className:\"px-6 py-3 bg-white/20 hover:bg-white/30 rounded-full font-bold flex items-center gap-2\",whileHover:{scale:1.05},whileTap:{scale:0.95},children:[/*#__PURE__*/_jsx(RotateCcw,{className:\"w-5 h-5\"}),\"Restart\"]})}),/*#__PURE__*/_jsx(AnimatePresence,{children:feedback&&/*#__PURE__*/_jsx(motion.div,{className:\"text-center\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:/*#__PURE__*/_jsxs(\"div\",{className:`inline-flex items-center gap-2 px-6 py-3 rounded-full text-lg font-bold ${isCorrect?'bg-green-500 text-white':'bg-orange-500 text-white'}`,children:[isCorrect?'üéâ':'ü§î',\" \",feedback]})})}),!gameStarted&&/*#__PURE__*/_jsxs(motion.div,{className:\"text-center bg-white/20 rounded-2xl p-6 max-w-md mx-auto\",initial:{opacity:0},animate:{opacity:1},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold mb-2\",children:\"\\uD83D\\uDCA1 Memory Tips:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 Look for patterns in the symbols\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 Remember positions, not just symbols\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 Take your time to memorize\"})]})]})]})});};export default MemoryQuestGame;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}